import{r as f,o as d,c as u,a as v,F as w,p as S,b as L,v as O,d as x}from"./vendor.f456e40a.js";const C=function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const t of o.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&i(t)}).observe(document,{childList:!0,subtree:!0});function c(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=c(e);fetch(e.href,o)}};C();var D=(l,s)=>{const c=l.__vccOpts||l;for(const[i,e]of s)c[i]=e;return c};const M=l=>(S("data-v-2020294c"),l=l(),L(),l),R=M(()=>v("h2",null,"\u5408\u5E76\u7ED3\u679C",-1)),I={setup(l){const s=f(null),c=f(!1),i=f(!1);let e=null,o=null,t=null,p=null;const y=async()=>{t=new O.exports.VideoStreamMerger({width:1920,height:1080,fps:25,clearRect:!0});try{e=await navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0}),t.addStream(e,{x:0,y:0,width:t.width,height:t.height})}catch(n){console.error("\u51FA\u9519\u4E86",n),e=null}try{o=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0}),t.addStream(o,{x:t.width-480,y:t.height-270,width:480,height:270})}catch(n){console.error("\u51FA\u9519\u4E86",n),o=null}t.start();const r=document.querySelector("video");r.srcObject=t.result,r.play(),i.value=!0},g=()=>{m(e),m(o),t.destroy(),t=null,document.querySelector("video").pause(),i.value=!1,c.value&&h()},_=r=>{if(!t)return alert("\u8BF7\u5148\u70B9\u51FB\u201C\u5F00\u59CB\u201D");p=new MediaRecorder(t.result),p.ondataavailable=n=>{b(n.data)},p.start(r>0?r:void 0),c.value=!0},h=()=>{p.stop(),c.value=!1},b=r=>{let n=URL.createObjectURL(r);var a=document.createElement("a");a.download="video.webm",a.href=n,document.body.appendChild(a),a.click(),document.body.removeChild(a)},m=r=>{var n;return(n=r==null?void 0:r.getTracks())==null?void 0:n.forEach(a=>a.stop())};return(r,n)=>(d(),u(w,null,[v("div",null,[i.value?(d(),u("button",{key:1,onClick:g},"\u505C\u6B62")):(d(),u("button",{key:0,onClick:y},"\u5F00\u59CB")),c.value?(d(),u("button",{key:3,onClick:h},"\u505C\u6B62\u5F55\u5236")):(d(),u("button",{key:2,onClick:_},"\u5F00\u59CB\u5F55\u5236"))]),R,v("video",{ref:(a,k)=>{k.video=a,s.value=a}},null,512)],64))}};var A=D(I,[["__scopeId","data-v-2020294c"]]);x(A).mount("#app");
